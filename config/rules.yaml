# Rules for the Japanese Arrows puzzle solver
# Each rule has a name, condition, complexity, and conclusions

- name: ARROW-POINTS-OOB
  condition: exists p (ahead(p) = 0)
  complexity: 1
  conclusions:
    - set(p, 0)
- name: GRID-SIZE
  condition: exists p,i (ahead(p) = i)
  complexity: 1
  conclusions:
    - exclude(p, >i)
- name: DIRECTLY_SEEN
  condition: exists p,i (sees_distinct(p) = i)
  complexity: 1
  conclusions:
    - exclude(p, <i)
- name: SEEN_AND_FREE
  condition: exists p,i,j,k (sees_distinct(p) = i ^ ahead_free(p) = j ^ k = i + j)
  complexity: 2
  conclusions:
    - exclude(p, >k)
- name: ADJACENT-ARROWS-SAME-DIRECTION
  condition: exists p,q,i (next(p) = q ^ dir(p) = dir(q) ^ val(q) = i)
  complexity: 2
  conclusions:
    - only(p, [i, i+1])
  
