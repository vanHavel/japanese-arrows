Japanese arrows is a puzzle which consists of a rectangular grid of n x m arrows. Arrows can point in any of the 4 cardinal directions, or diagonally (e.g. NW).

Initially, some of the arrows may contain numbers, but most are empty. The goal of the puzzle is to fill a digit (0-9) into each arrow, according to the following rule:

The number in each arrow equals the count of distinct numbers in the other arrows it is pointing at.

Arrows may point outside of the grid (in which case they must be labeled 0).

Arrows are intended to be filled step by step by logical deduction (like in Sudoku or similar puzzles). A well-formed puzzle is assumed to have only one unique solution.